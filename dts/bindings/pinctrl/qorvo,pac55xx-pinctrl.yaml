# Copyright (c) 2023 Teslabs Engineering S.L.
# SPDX-License-Identifier: Apache-2.0

description: |
    The Qorvo PAC55XX pin controller is a singleton node responsible for
    controlling pin function selection and pin properties.

    The node has the 'pinctrl' node label set in your SoC's devicetree,
    so you can modify it like this:

      &pinctrl {
        /* your modifications go here */
      };

    All device pin configurations should be placed in child nodes of the
    'pinctrl' node, as shown in this example:

      /* You can put this in places like a board-pinctrl.dtsi file in
       * your board directory, or a devicetree overlay in your application.
       */

      /* include pre-defined configurations */
      #include <zephyr/dt-bindings/pinctrl/pac55xx-pinctrl.h>

      &pinctrl {
        /* configuration for the usarta "default" state */
        usarta_default: usarta_default {
          group1 {
            /* configure PA4 as USARTA TX, output in push-pull mode */
            pinmux = <USARTA_TX_PA4>;
            drive-push-pull;
          };
          group2 {
            /* configure PA5 as USARTA RX, input with pull-up */
            pinmux = <USARTA_RX_PA5>;
            bias-pull-up;
          };

    The 'usarta_default' child node encodes the pin configurations for a
    particular state of a device; in this case, the default (that is, active)
    state.

    As shown, pin configurations are organized in groups within each child node.
    Each group can specify a list of pin function selections in the 'pinmux'
    property.

    A group can also specify shared pin properties common to all the specified
    pins, such as the 'bias-pull-up' property in group2. Here is a list of
    supported standard pin properties:

    - drive-push-pull: Push-pull output drive mode.
    - drive-open-drain: Open-drain output drive mode.
    - bias-pull-up: Enable pull-up resistor.
    - bias-pull-down: Enable pull-down resistor.
    - drive-strength: Drive strength (defaults to 6mA, HW default).
    - input-schmitt-enable: Enable Schmitt trigger on input.

    By default pins will be configured in high-impedance input mode, output
    mode will be configured when providing one of the drive-* properties.

    To link pin configurations with a device, use a pinctrl-N property for some
    number N, like this example you could place in your board's DTS file:

       #include "board-pinctrl.dtsi"

       &usarta {
             pinctrl-0 = <&usarta_default>;
             pinctrl-names = "default";
       };

compatible: "qorvo,pac55xx-pinctrl"

include: base.yaml

child-binding:
  child-binding:
    include:
      - name: pincfg-node.yaml
        property-allowlist:
          - drive-push-pull
          - drive-open-drain
          - bias-pull-down
          - bias-pull-up
          - drive-strength
          - input-schmitt-enable

    properties:
      pinmux:
        required: true
        type: array
        description: |
          An array of pins sharing the same group properties. The pins should
          be defined using pre-defined macros or, alternatively, using the
          PAC55XX_PINMUX helper macro.

      drive-strength:
        default: 6
        enum:
          - 6
          - 8
          - 11
          - 14
          - 17
          - 20
          - 22
          - 25
